<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600&display=swap" rel="stylesheet">
    <title>ุงูุชุญูู ูู ุงูุดูุงุฏุฉ | ุงูุทูุฑุงู ูุงููุฑุงูุจุฉ ุงูุฌููุฉ</title>
    <link rel="icon" href="img.img/1.jpg">
    <link rel="stylesheet" href="style.css">
    <style>
        /* ุชูุณููุงุช ุฅุถุงููุฉ ูุญุงูุฉ ุงูุชุญููู ูุงูุฑุณุงุฆู */
        .loading { color: #1f3479; font-weight: bold; margin: 10px; display: none; }
        .error-msg { color: red; font-weight: bold; margin: 10px; }
        .success-box { border: 2px solid #2f701b; background-color: #f9fff9; padding: 20px; border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <img src="img.img/3.PNG" alt="ุดุนุงุฑ ุงููููุน" class="logo">
        </header>
        
        <h1>ูุธุงู ุงูุชุญูู ูู ุงูุดูุงุฏุงุช</h1>
        <p style="font-size: larger; color: #190d50; font-weight: bold;">ุงููููุฏุณ: ุนูู ุญูุฏุฑ ุงููุฑู</p>
        
        <div style="margin: 20px 0;">
            <a href="winners.html">ูุงุฆูุฉ ุงููุดุงุฑููู (ุนุงู)</a>
            <a href="https://www.instagram.com/krade3?igsh=MXBsd215dTh0OWp3aA==" target="_blank">ุงุถุบุท ููุง ููุงุณุชูุณุงุฑ</a>
        </div>

        <hr style="border: 0; border-top: 1px solid #ccc; margin: 20px 0;">

        <h3>ุฃุฏุฎู ุฑูู ุงูุดูุงุฏุฉ ููุชุญูู</h3>
        <p style="font-size: small; color: #666;">ูุซุงู: ATC-25-001</p>
        
        <input type="text" id="certIdInput" placeholder="ุฃุฏุฎู ุฑูู ุงูุดูุงุฏุฉ ููุง...">
        <button onclick="verifyCertificate()" style="background-color: #1f3479; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-family: 'Cairo';">ุชุญูู ุงูุขู</button>
        
        <div id="loadingMessage" class="loading">ุฌุงุฑู ุงูุจุญุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช...</div>
        <div id="resultArea"></div>

    </div>

    <footer>
        <p>ุฌููุน ุงูุญููู ูุญููุธุฉ &copy; 2025</p>
    </footer>

    <script>
        // ูุงู ุฌุฏุงู: ุถุน ุงูุฑุงุจุท ุงูุฐู ูุณุฎุชู ูู Google Script ููุง
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw_XwHq45hyyOwT0KTKVe5Oi7P-LckolfGtXtTy4iq2KbW0IjlA-pt8F0sfoYt9Xu8S/exec"; 

        function verifyCertificate() {
            var certId = document.getElementById("certIdInput").value.trim();
            var resultDiv = document.getElementById("resultArea");
            var loadingDiv = document.getElementById("loadingMessage");

            // ุชูุธูู ุงููุชุงุฆุฌ ุงูุณุงุจูุฉ
            resultDiv.innerHTML = "";
            
            if (certId === "") {
                resultDiv.innerHTML = "<p class='error-msg'>ูุฑุฌู ูุชุงุจุฉ ุฑูู ุงูุดูุงุฏุฉ ุฃููุงู.</p>";
                return;
            }

            // ุฅุธูุงุฑ ุฑุณุงูุฉ ุงูุชุญููู
            loadingDiv.style.display = "block";

            // ุงูุงุชุตุงู ุจู Google Script
            fetch(GOOGLE_SCRIPT_URL + "?id=" + certId)
            .then(response => response.json())
            .then(data => {
                loadingDiv.style.display = "none"; // ุฅุฎูุงุก ุงูุชุญููู

                if (data.found) {
                    // ุชู ุงูุนุซูุฑ ุนูู ุงูุดูุงุฏุฉ
                    resultDiv.innerHTML = `
                        <div class="success-box">
                            <h2 style="color: #2f701b;">โ ุดูุงุฏุฉ ูุนุชูุฏุฉ</h2>
                            <p><strong>ุฑูู ุงูุดูุงุฏุฉ:</strong> ${certId}</p>
                            <p><strong>ุงุณู ุงููุชุฏุฑุจ:</strong> ${data.name}</p>
                            <a href="${data.pdfPath}" target="_blank" style="font-size:18px;">๐ ุชุญููู/ุนุฑุถ ุงูุดูุงุฏุฉ</a>
                        </div>
                    `;
                } else {
                    // ูู ูุชู ุงูุนุซูุฑ ุนูููุง
                    resultDiv.innerHTML = `
                        <div style="margin-top:20px;">
                            <h3 class="error-msg">โ ูู ูุชู ุงูุนุซูุฑ ุนูู ุดูุงุฏุฉ ุจูุฐุง ุงูุฑูู</h3>
                            <p>ุชุฃูุฏ ูู ุฅุฏุฎุงู ุงูุฑูู ูุงูุดุฑุญุงุช (-) ุจุดูู ุตุญูุญ.</p>
                        </div>
                    `;
                }
            })
            .catch(error => {
                loadingDiv.style.display = "none";
                console.error('Error:', error);
                resultDiv.innerHTML = "<p class='error-msg'>ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงูุ ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู.</p>";
            });
        }
    </script>

</body>
</html>
